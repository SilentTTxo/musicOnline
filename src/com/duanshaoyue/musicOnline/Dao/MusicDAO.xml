<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.duanshaoyue.musicOnline.Dao.MusicDAO">
	<select id="findAll" resultType="Music">
		select * from MUSIC
	</select>
	<select id="findByUserId" parameterType="Integer" resultType="Music">
		select MUSICID AS ID,TITLE,URL,ARTIST,ALBUM,DURATION from LOVEMUSIC join MUSIC on musicid = MUSIC.ID where userid = #{userid}  
	</select>
	<select id="findByName" parameterType="String" resultType="Music">
		select * from MUSIC where TITLE like #{name} or ARTIST like #{name}  
	</select>
	<select id="findByAlbum" parameterType="String" resultType="Music">
		select * from MUSIC where Album like #{name}  
	</select>
	<select id="findAlbumByArtist" parameterType="String" resultType="Music">
		SELECT * from MUSIC where artist like #{name} GROUP BY ALBUM   
	</select>
	<insert id="addLoveMusic">
		insert IGNORE into LOVEMUSIC values (NULL,#{0},#{1})
	</insert>
	<delete id="delMusic" parameterType="Integer">
		DELETE FROM MUSIC where ID = #{musicid}
	</delete>
	<delete id="delAlbum">
		DELETE FROM MUSIC where ARTIST like #{0} and ALBUM = #{1};
	</delete>
	<delete id="delLoveMusic">
		DELETE FROM LOVEMUSIC where userid = #{0} and musicid = #{1}
	</delete>
	<insert id="addMusic">
		insert IGNORE into MUSIC values (#{0},#{1},#{2},#{3},#{4},#{5},#{6},#{7})
	</insert>
	<update id="updateMusic" >
		update MUSIC set ALBUM = #{1},TITLE= #{2},ARTIST=#{3} where id = #{0}
	</update>
</mapper>